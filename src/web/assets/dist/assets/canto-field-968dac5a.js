console.log("inside of /resources/script.js!!!");if($("#fields-dam-asset-preview").attr("data-thumbnailurl")==null||$("#fields-dam-asset-preview").attr("data-thumbnailurl")=="none")$("#fields-dam-asset-preview").hide();else{let e=$("#fields-dam-asset-preview").attr("data-thumbnailurl");$("#fields-rosas-clicker").html("Choose a Different DAM Asset"),$("#fields-dam-asset-preview").prepend(`<img id="fields-dam-preview-image" style="max-height:200px; max-width:200px;" src=${e}/>`)}let l=$(`
                <div id="rosas-modal" class="modal"> <!-- modal body -->
                    <div id="modal-test" class="body" style="padding: 0;"> <!-- modal-content -->
                        <header class="header" style="padding: 48px 48px 24px; margin: -24px -24px 0px;">
                            <h2>Canto Assets</h2>
                        </header>
                        <iframe id="cantoUCFrame" class="canto-uc-subiframe" src=""></iframe>
                        <div id="modal-status-bar">Uploading Image...</div>
                    </div>
                </div>
                `),c=new Garnish.Modal(l,{autoShow:!1}),s="cantoUC";$("#fields-remove-dam-asset").click(function(e){let a=e.target.dataset.field,o=e.target.dataset.element;e.target.dataset.asset,$.ajax({type:"POST",url:"/canto-dam-integrator/dam-asset-removal",dataType:"json",data:{elementId:o,fieldId:a},success:function(t){JSON.parse(t).status=="success"?($("#fields-rosas-clicker").html("Add a DAM Asset"),$("#fields-dam-asset-preview").hide()):(console.log("logging data!!!"),console.log(t),alert("An error occurred while attempting to remove the image, please try again later."))},error:function(t){console.log("logging request!!!"),console.log(t),alert("An error occurred while attempting to remove the image, please try again later.")}})});$("#fields-rosas-clicker").click(function(e){c.show();let a=e.target.dataset.field,o=e.target.dataset.element,t=e.target.dataset.type,n=e.target.dataset.access;r(a,o,t,n)});$.fn[s]=$[s]=function(e,a){/*! options.env:   flightbycanto.com/staging.cantoflight.com/canto.com/canto.global
*/u(e),loadCantoUCResource(),g(),p(),window.onmessage=function(o){let t=o.data;if(t&&t.type=="getTokenInfo"){let n=document.getElementById("cantoUCFrame").contentWindow;tokenInfo.formatDistrict=formatDistrict,n.postMessage(tokenInfo,"*")}else t&&t.type=="cantoLogout"?(tokenInfo={},$(".canto-uc-iframe-close-btn").trigger("click")):t&&t.type=="cantoInsertImage"?($(".canto-uc-iframe-close-btn").trigger("click"),a(currentCantoTagID,t.assetList)):t&&t.type=="closeModal"?c.hide():t&&(verifyCode=t,m(verifyCode))}};function m(e){$.ajax({type:"POST",url:"https://oauth.canto.com/oauth/api/oauth2/universal2/token",dataType:"json",data:{app_id:appId,grant_type:"authorization_code",redirect_uri:"http://localhost:8080",code:e,code_verifier:timeStamp},success:function(a){tokenInfo=a,f(tokenInfo)},error:function(a){alert("Get token error")}})}function f(e){$.ajax({type:"GET",url:"https://oauth.canto.com:443/oauth/api/oauth2/tenant/"+e.refreshToken,success:function(a){e.tenant=a;var o="/admin/_canto-dam-assets/canto-embed.twig";$("#cantoUCFrame").attr("src",o)},error:function(a){alert("Get tenant error")}})}function u(e){var a={"flightbycanto.com":"f5ecd6095ebb469691b7398e4945eb44","staging.cantoflight.com":"f18c8f3b79644b168cad5609ff802085","canto.com":"a9dc81b1bf9d492f8ee3838302d266b2","canto.global":"f87b44d366464dfdb4867ab361683c96","canto.de":"e7135823e3d046468287e835008da493","cantodemo.com":"de5c606732a34b44b99ec20c40f6cb5e"};env=e.env,appId=a[env],formatDistrict=e.extensions}function g(){$(document).on("click",".canto-uc-iframe-close-btn",function(e){$("#cantoUCPanel").addClass("hidden"),$("#cantoUCFrame").attr("src","")}).on("click",".canto-pickup-img-btn",function(e){currentCantoTagID=$(e.target).closest("canto").attr("id"),$("#cantoUCPanel").removeClass("hidden"),r()})}function p(){var e=$("body"),a=e.find("canto"),o='<button class="canto-pickup-img-btn">+ Insert Files from Canto</button>';a.append(o)}function r(e,a,o,t){new Date().getTime();let n={accessToken:t},i="https://oauth.canto.com/oauth/api/oauth2/universal2/authorize?response_type=code&app_id=52ff8ed9d6874d48a3bef9621bc1af26&redirect_uri=http://localhost:8080&state=abcd&code_challenge=1649285048042&code_challenge_method=plain";console.log("Inside of script.js about to load UC!");var d="/admin/_canto-dam-assets/canto-embed.twig";n.accessToken?($("#cantoUCFrame").attr("data-element",a),$("#cantoUCFrame").attr("data-field",e),$("#cantoUCFrame").attr("data-type",o),$("#cantoUCFrame").attr("data-access",n.accessToken),$("#cantoUCFrame").attr("src",d)):($("#cantoUCFrame").attr("data-element",a),$("#cantoUCFrame").attr("data-field",e),$("#cantoUCFrame").attr("data-type",o),$("#cantoUCFrame").attr("src",i))}
//# sourceMappingURL=canto-field-968dac5a.js.map
