{"version":3,"file":"canto-embed-dfc6882c.js","sources":["../../../../../buildchain/src/js/canto-embed.js"],"sourcesContent":["let cantoViewDom = {};\nlet _accessToken = \"\";\nlet _refreshToken = \"\";\nlet _tokenType = \"\";\nlet _tenants = \"\";\nlet cantoAPI = {};\nlet _APIHeaders = {};\nlet searchedBy = \"\"; //bySearch bytree byScheme''\nlet currentImageList = [];\nlet singleCountLoad = 50;\nlet apiNextStart = 0;\nlet isLoadingComplete = false;\nlet _formatDistrict = '';\n\n/* -----------------canto API start-------------------------------------------------------------*/\n\nfunction setToken(tokenInfo) {\n  _accessToken = tokenInfo.accessToken;\n  _tenants = tokenInfo.tenant ? tokenInfo.tenant : \"rubin.canto.com/\";\n  _tokenType = tokenInfo.tokenType ? tokenInfo.tokenType : \"bearer\";\n  _APIHeaders = {\n    \"Authorization\": _tokenType + \" \" + _accessToken,\n    \"Content-Type\": \"application/x-www-form-urlencoded\"\n  };\n  _formatDistrict = tokenInfo.formatDistrict;\n}\n\ncantoAPI.loadTree = function (callback) {\n  var url = \"https://\" + _tenants + \"/api/v1/tree?sortBy=name&sortDirection=ascending&layer=1\";\n  $.ajax({\n    headers: _APIHeaders,\n    type: \"GET\",\n    url: url,\n    async: true,\n    error: function (request) {\n      alert(\"load tree error\");\n    },\n    success: function (data) {\n      callback(data.results);\n    }\n  });\n};\ncantoAPI.loadSubTree = function (treeID, callback) {\n  let url = `https://${_tenants}/api/v1/tree/${treeID}`;\n  $.ajax({\n    headers: _APIHeaders,\n    type: \"GET\",\n    url: url,\n    async: true,\n    error: function (request) {\n      alert(\"load tree error\");\n    },\n    success: function (data) {\n      callback(data.results);\n    }\n  });\n};\ncantoAPI.getListByAlbum = function (albumID, callback) {\n  if (isLoadingComplete) {\n    return;\n  }\n  let filterString = loadMoreHandler();\n  let url = `https://${_tenants}/api/v1/album/${albumID}?${filterString}`;\n  $.ajax({\n    type: \"GET\",\n    headers: _APIHeaders,\n    url: url,\n    async: true,\n    error: function (request) {\n      alert(\"load list error\");\n    },\n    success: function (data) {\n      currentImageList.push.apply(currentImageList, data.results);\n      if (!data.start) {\n        data.start = 0;\n      }\n      if (data.found - data.limit <= data.start) {\n        isLoadingComplete = true;\n      } else {\n        isLoadingComplete = false;\n      }\n      apiNextStart = data.start + data.limit + 1;\n      $(\"#loadingMore\").delay(1500).fadeOut(\"slow\");\n      callback(data.results);\n    }\n  });\n};\ncantoAPI.getRedirectURL = function (previewURL, ID) {\n  if (!(previewURL && ID)) return;\n  let url = previewURL + 'URI';\n  $.ajax({\n    type: \"GET\",\n    headers: _APIHeaders,\n    url: url,\n    error: function (request) {\n      console.error(request.getError());\n    },\n    success: function (data) {\n      $(\"img#\" + ID).attr('src', data);\n    }\n  });\n};\ncantoAPI.getHugeRedirectURL = function (previewURL, ID) {\n  if (!(previewURL && ID)) return;\n  let url = `${previewURL}URI/2000`;\n  $.ajax({\n    type: \"GET\",\n    headers: _APIHeaders,\n    url: url,\n    error: function (request) {\n      console.error(request.getError());\n    },\n    success: function (data) {\n      let $viewImageModal = $(\"#cantoViewBody\").find(\"#imageBox\");\n      $viewImageModal.find(\"img\").attr(\"src\", data);\n    }\n  });\n};\n\n\ncantoAPI.getListByScheme = function (scheme, callback) {\n  if (scheme == \"allfile\") {\n    let data = {scheme: \"allfile\", keywords: \"\"};\n    cantoAPI.getFilterList(data, callback);\n  } else {\n    if (isLoadingComplete) {\n      return;\n    }\n    let filterString = loadMoreHandler();\n    let url = `https://${_tenants}/api/v1/${scheme}?${filterString}`;\n    $.ajax({\n      type: \"GET\",\n      headers: _APIHeaders,\n      url: url,\n      async: false,\n      error: function (request) {\n        alert(\"load list error\");\n      },\n      success: function (data) {\n        currentImageList.push.apply(currentImageList, data.results);\n        if (!data.start) {\n          data.start = 0;\n        }\n        if (data.found - data.limit <= data.start) {\n          isLoadingComplete = true;\n        } else {\n          isLoadingComplete = false;\n        }\n        apiNextStart = data.start + data.limit + 1;\n        $(\"#loadingMore\").delay(1500).fadeOut(\"slow\");\n        callback(data.results);\n      }\n    });\n  }\n\n};\n\ncantoAPI.getDetail = function (contentID, scheme, callback) {\n  let url = `https://${_tenants}/api/v1/${scheme}/${contentID}`;\n  $.ajax({\n    type: \"GET\",\n    headers: _APIHeaders,\n    url: url,\n    async: true,\n    error: function (request) {\n      alert(\"load detail error\");\n    },\n    success: function (data) {\n      callback(data);\n    }\n  });\n};\n\ncantoAPI.getFilterList = function (data, callback) {\n  if (isLoadingComplete) {\n    return;\n  }\n  let filterString = loadMoreHandler();\n  let url = `https://${_tenants}/api/v1/search?${filterString}`;\n  url += `&keyword=${data.keywords}`;\n  if (data.scheme && data.scheme == \"allfile\") {\n    url += `&scheme=${encodeURIComponent(\"image|presentation|document|audio|video|other\")}`;\n  } else if (data.scheme) {\n    url += `&scheme=${data.scheme}`;\n  }\n  $.ajax({\n    type: \"GET\",\n    headers: _APIHeaders,\n    url: url,\n    async: false,\n    error: function (request) {\n      alert(\"load List error\");\n    },\n    success: function (data) {\n      currentImageList.push.apply(currentImageList, data.results);\n      if (!data.start) {\n        data.start = 0;\n      }\n      if (data.found - data.limit <= data.start) {\n        isLoadingComplete = true;\n      } else {\n        isLoadingComplete = false;\n      }\n      apiNextStart = data.start + data.limit + 1;\n      $(\"#loadingMore\").delay(1500).fadeOut(\"slow\");\n      callback(data.results);\n    }\n  });\n};\n\ncantoAPI.logout = function () {\n  //clear cookie and trun to login page.\n  let targetWindow = parent;\n  let data = {};\n  data.type = \"cantoLogout\";\n  targetWindow.postMessage(data, '*');\n};\n\ncantoAPI.insertImage = function (imageArray) {\n  //clear cookie and trun to login page.\n  if (!(imageArray && imageArray.length)) {\n    return;\n  }\n  let data = {};\n  data.type = \"cantoInsertImage\";\n  data.assetList = [];\n  // Now fetch the asset detail\n  let url = `https://${_tenants}/api/v1/batch/content`;\n  fetch(url, {\n    method: \"post\",\n    headers: {\n      \"Authorization\": `${_tokenType} ${_accessToken}`,\n      \"Content-Type\": \"application/json; charset=utf-8\"\n    },\n    body: JSON.stringify(imageArray)\n  }).then(response => {\n    return response.json();\n  }).then(contentResponse => {\n    // Get the id of the canto asset, or 0 if it is a collection of images\n    let id = 0;\n    if (contentResponse.length === 1) {\n      id = contentResponse[0].id;\n    }\n    const mergedAssetData = contentResponse.docResult;\n    // Gather information about the selected album\n    let album = $(\"#treeviewSection\").find(\"li.selected\");\n    const albumId = album.data('id');\n    let albumName = album.find('span').text();\n    const albumData = {\n      id: albumId,\n      name: albumName,\n    };\n    // Compose the payload to send as an event\n    let data = {\n      type: \"closeModal\",\n      cantoId: id,\n      cantoAlbumId: albumId,\n      cantoAssetData: mergedAssetData,\n      cantoAlbumData: albumData,\n    };\n    // Let our canto-field.js know what asset(s) were picked\n    parent.postMessage(data, '*');\n  });\n};\n\n/* -----------------canto API end--------------------------------------------------------*/\n\n$(document).ready(function () {\n  getFrameDom();\n  addEventListener();\n  getTokenInfo();\n\n  window.addEventListener(\"message\", (event) => {\n    let tokenInfo = event.data;\n\n    if (tokenInfo && tokenInfo.accessToken && tokenInfo.accessToken.length > 0) {\n      setToken(tokenInfo);\n    } else {\n      setToken({\n        accessToken: parent.document.querySelector(\".canto-uc-subiframe\").dataset.access\n      });\n    }\n    treeviewDataHandler();\n    let initSchme = $(\"#cantoViewBody\").find(\".type-font.current\").data(\"type\");\n    $(\"#cantoViewBody\").find(\"#globalSearch input\").val(\"\");\n    getImageInit(initSchme);\n  });\n});\n\nfunction getTokenInfo() {\n  let targetWindow = parent;\n  let data = {};\n  data.type = \"getTokenInfo\";\n  targetWindow.postMessage(data, '*');\n}\n\nfunction getFrameDom() {\n  let parentDocument = document;\n  let contentIframe = document.getElementsByClassName('canto-uc-subiframe')[0];\n  if (contentIframe) {\n    parentDocument = contentIframe.contentDocument;\n  }\n  cantoViewDom = parentDocument;\n}\n\nfunction addEventListener() {\n  document.addEventListener('sendTokenInfo', function (e) {\n    let tokenInfo = e.data;\n    _accessToken = tokenInfo.accessToken;\n    _refreshToken = tokenInfo.refreshToken;\n    _tokenType = tokenInfo.tokenType;\n  });\n\n  $(document).off('click').on(\"click\", \"#treeviewSwitch\", function (e) {\n      if ($('#treeviewSection').hasClass(\"expanded\")) {\n        $('#treeviewSection').stop().animate({\n          left: '-20%'\n        });\n        $('#cantoImageBody').stop().animate({\n          width: '100%',\n          left: '0'\n        }, imageResize);\n        $('#treeviewSection').removeClass(\"expanded\");\n        $(\"#loadingMore\").addClass(\"no-treeview\");\n        $(\"#noItem\").addClass(\"no-treeview\");\n        $(\".max-select-tips\").addClass(\"no-treeview\");\n      } else {\n        $('#treeviewSection').stop().animate({\n          left: '0px'\n        });\n        $('#cantoImageBody').stop().animate({\n          width: '80%',\n          left: '20%'\n        }, imageResize);\n        $('#treeviewSection').addClass(\"expanded\");\n        $(\"#loadingMore\").removeClass(\"no-treeview\");\n        $(\"#noItem\").removeClass(\"no-treeview\");\n        $(\".max-select-tips\").removeClass(\"no-treeview\");\n      }\n\n    })\n    .on(\"click\", \".type-font\", function (e) {\n      searchedBy = \"byScheme\";\n      $(\".type-font\").removeClass(\"current\");\n      $(this).addClass(\"current\");\n      // let type = $(this).data(\"type\");\n      $(\"#cantoViewBody\").find(\"#globalSearch input\").val(\"\");\n      $(\"#cantoViewBody\").find(\"#treeviewSection ul li\").removeClass(\"selected\");\n\n      let data = {};\n      data.scheme = $(\"#cantoViewBody\").find(\".type-font.current\").data(\"type\");\n      data.keywords = \"\";\n      $(\"#cantoViewBody\").find(\"#imagesContent\").html(\"\");\n      $(\"#cantoViewBody\").find(\"#imagesContent\").scrollTop(0);\n      isLoadingComplete = false;\n      currentImageList = [];\n      cantoAPI.getFilterList(data, imageListDisplay);\n\n    })\n    .on(\"click\", \"#selectAllBtn\", function (e) {\n      $(\"#cantoViewBody\").find('.single-image .select-box').removeClass(\"icon-s-Ok2_32\");\n      $(\"#cantoViewBody\").find(\".single-image\").removeClass(\"selected\");\n      handleSelectedMode();\n    })\n    .on(\"click\", \"#insertAssetsBtn\", function (e) {\n      $(\"#cantoViewBody\").find(\".loading-icon\").removeClass(\"hidden\");\n      let assetArray = [];\n      let selectedArray = $(\"#cantoViewBody\").find(\".single-image .icon-s-Ok2_32\").closest(\".single-image\");\n      for (let i = 0; i < selectedArray.length; i++) {\n        let obj = {};\n        obj.id = $(selectedArray[i]).data(\"id\");\n        obj.scheme = $(selectedArray[i]).data(\"scheme\");\n        obj.size = $(selectedArray[i]).data(\"size\");\n        assetArray.push(obj);\n      }\n      cantoAPI.insertImage(assetArray);\n    })\n    // Allow for the insertion of the entire album into the target system\n    .on(\"click\", \"#insertAlbumBtn\", function (e) {\n      $(\"#cantoViewBody\").find(\".loading-icon\").removeClass(\"hidden\");\n      let assetArray = [];\n      let selectedArray = $(\"#cantoViewBody\").find(\".single-image[data-scheme='image']\").closest(\".single-image\");\n      for (let i = 0; i < selectedArray.length; i++) {\n        let obj = {};\n        obj.id = $(selectedArray[i]).data(\"id\");\n        obj.scheme = $(selectedArray[i]).data(\"scheme\");\n        obj.size = $(selectedArray[i]).data(\"size\");\n        assetArray.push(obj);\n      }\n      if (assetArray.length) {\n        cantoAPI.insertImage(assetArray);\n      } else {\n        $(\"#cantoViewBody\").find(\".loading-icon\").addClass(\"hidden\");\n      }\n    })\n    .on(\"click\", \".icon-s-Fullscreen\", function (e) {\n      e.cancelBubble = true;\n      e.stopPropagation();\n      e.preventDefault();\n      $(\"#cantoViewBody\").find(\".loading-icon\").removeClass(\"hidden\");\n      let targetURL = $(e.currentTarget).closest(\".single-image\").data(\"xurl\");\n      let previewURL = targetURL + \"?Authorization=\" + _accessToken;\n      displayFullyImage(previewURL);\n    })\n    .on(\"click\", \".single-image\", function (e) {\n      $(\"#cantoViewBody\").find(\".loading-icon\").removeClass(\"hidden\");\n      //display image\n      let targetURL = $(e.currentTarget).closest(\".single-image\").data(\"xurl\");\n      let targetID = $(e.currentTarget).closest(\".single-image\").data(\"id\");\n      cantoAPI.getHugeRedirectURL(targetURL, targetID);\n      //display detail\n      let id = $(this).data(\"id\");\n      let scheme = $(this).data(\"scheme\");\n      cantoAPI.getDetail(id, scheme, imageNewDetail);\n    })\n    .on(\"click\", \"#logoutBtn\", function (e) {\n      $(\".loading-icon\").removeClass(\"hidden\");\n      cantoAPI.logout();\n    })\n    //treeview event\n    .on(\"click\", \"#treeviewSection ul li\", function (e) {\n      e.cancelBubble = true;\n      e.stopPropagation();\n      e.preventDefault();\n      let childList = $(e.currentTarget).children(\"ul\");\n      // childList.toggleClass(\"hidden\");\n      if (\"treeviewContent\" == $(e.currentTarget)[0].id) {\n        //load init image list.\n        $(\"#cantoViewBody\").find(\"#globalSearch input\").val(\"\");\n        $(\"#cantoViewBody\").find(\"#treeviewSection ul li\").removeClass(\"selected\");\n        $(\"#cantoViewBody\").find(\".type-font\").removeClass(\"current\");\n        $(\"#cantoViewBody\").find(\"#imagesContent\").html(\"\");\n        $(\"#cantoViewBody\").find(\"#imagesContent\").scrollTop(0);\n        currentImageList = [];\n        searchedBy = \"\";\n        isLoadingComplete = false;\n        console.log(\"line 499\");\n        getImageInit(\"allfile\");\n\n      } else if (childList && childList.length) {\n        childList.animate({\n          height: 'toggle'\n        });\n      } else if ($(e.currentTarget).hasClass(\"has-sub-folder\")) {\n        let subTreeId = $(e.currentTarget).data(\"id\");\n        $(e.currentTarget).addClass(\"current-tree-node\");\n        $(e.currentTarget).find(\".folder-loading\").removeClass(\"hidden\");\n        $(e.currentTarget).find(\".icon-s-Folder_open-20px\").addClass(\"hidden\");\n        cantoAPI.loadSubTree(subTreeId, subTreeRender);\n\n      } else {\n        $(\"#treeviewSection ul li\").removeClass(\"selected\");\n        $(\"#cantoViewBody\").find(\".type-font\").removeClass(\"current\");\n        $(\"#insertAlbumWrapper\").removeClass(\"hidden\");\n        $(e.currentTarget).addClass(\"selected\");\n        $(\"#cantoViewBody\").find(\"#globalSearch input\").val(\"\");\n        $(\"#cantoViewBody\").find(\"#imagesContent\").html(\"\");\n        $(\"#cantoViewBody\").find(\"#imagesContent\").scrollTop(0);\n        currentImageList = [];\n        isLoadingComplete = false;\n        searchedBy = \"bytree\";\n        let albumId = $(e.currentTarget).data(\"id\");\n        cantoAPI.getListByAlbum(albumId, imageListDisplay);\n      }\n\n    })\n    .on(\"click\", \"#globalSearchBtn\", function (e) {\n      let value = $(\"#cantoViewBody\").find(\"#globalSearch input\").val();\n      if (!value) {\n        //load init image list.\n        $(\"#cantoViewBody\").find(\"#treeviewSection ul li\").removeClass(\"selected\");\n        let initSchme = $(\"#cantoViewBody\").find(\".type-font.current\").data(\"type\");\n        $(\"#cantoViewBody\").find(\"#globalSearch input\").val(\"\");\n        $(\"#cantoViewBody\").find(\"#imagesContent\").html(\"\");\n        $(\"#cantoViewBody\").find(\"#imagesContent\").scrollTop(0);\n        currentImageList = [];\n        searchedBy = \"\";\n        isLoadingComplete = false;\n        console.log(\"line 492\");\n        getImageInit(initSchme);\n      }\n      searchedBy = \"bySearch\";\n      isLoadingComplete = false;\n      $(\"#cantoViewBody\").find(\"#treeviewSection ul li\").removeClass(\"selected\");\n      $(\"#cantoViewBody\").find(\".type-font\").removeClass(\"current\");\n      let initSchme = $(\"#cantoViewBody\").find(\".type-font.current\").data(\"type\");\n      let data = {};\n      data.scheme = initSchme;\n      data.keywords = value;\n      $(\"#cantoViewBody\").find(\"#imagesContent\").html(\"\");\n      $(\"#cantoViewBody\").find(\"#imagesContent\").scrollTop(0);\n      currentImageList = [];\n      cantoAPI.getFilterList(data, imageListDisplay);\n    });\n  $(\"#cantoViewBody\").find(\"#cantoImageBody\").on(\"scroll\", function () {\n    if (isScrollToPageBottom() && !isLoadingComplete) {\n      loadMoreAction();\n    }\n  });\n\n  let inputObj = $(\"#cantoViewBody\").find(\"#globalSearch input\");\n  $(inputObj).bind('keyup', function (event) {\n    if (event.keyCode == \"13\") {\n      $(\"#cantoViewBody\").find('#globalSearchBtn').click();\n    }\n  });\n\n  let imageListSection = $(\"#cantoViewBody\").find(\"#cantoImageBody\");\n  $(imageListSection).resize(function () {\n    imageResize();\n  });\n}\n\nfunction getImageInit(scheme) {\n  cantoAPI.getListByScheme(scheme, imageListDisplay);\n}\n\nfunction imageListDisplay(imageList) {\n  if (!(imageList && imageList.length > 0)) {\n    return;\n  }\n  let formatArr = [];\n  if (_formatDistrict && _formatDistrict.length > 1) {\n    formatArr = _formatDistrict.split(\";\");\n  }\n  for (let i = 0; i < imageList.length; i++) {\n    let d = imageList[i];\n    let extension = d.name.substring(d.name.lastIndexOf('.') + 1);\n    if (formatArr.length && !formatArr.includes(extension)) {\n      continue;\n    }\n    let html = \"\";\n    let disname = d.name;\n    if (d.name.length > 150) {\n      disname = d.name.substr(0, 142) + '...' + d.name.substr(-5);\n    }\n    html += `<div class=\"single-image\" data-id=\"${d.id}\" data-scheme=\"${d.scheme}\" data-xurl=\"${d.url.preview}\" data-name=\"${d.name}\" data-size=\"${d.size}\" >\n                    <img id=\"${d.id}\" src=\"https://s3-us-west-2.amazonaws.com/static.dmc/universal/icon/back.png\" alt=\"${d.scheme}\">\n                    <div class=\"mask-layer\"></div>\n                    <div class=\"single-image-name\">${disname}</div>\n                    <span class=\"select-box icon-s-UnselectedCheck_32  \"></span><span class=\"select-icon-background\"></span>\n                </div>`;\n    $(\"#cantoViewBody\").find(\"#imagesContent\").append(html);\n    cantoAPI.getRedirectURL(d.url.preview, d.id);\n  }\n  let currentCount = $(\"#cantoViewBody\").find('.single-image').length;\n  if (currentCount == 0) {\n    $(\"#cantoViewBody\").find(\"#noItem\").removeClass(\"hidden\");\n  } else {\n    $(\"#cantoViewBody\").find(\"#noItem\").addClass(\"hidden\");\n  }\n  let rem = [];\n  $(\"#cantoViewBody\").find('.single-image').hover(function () {\n    let nameTop = $(this).height() - $(this).find(\".single-image-name\").height() - 20;\n    $(this).find('.single-image-name').stop().animate({top: nameTop});\n  }, function () {\n    $(this).find('.single-image-name').stop().animate({top: '100%'});\n  });\n  $(\"#cantoViewBody\").find('.single-image .select-box').off('click').on('click', function (e) {\n    e.cancelBubble = true;\n    e.stopPropagation();\n    e.preventDefault();\n\n    rem.push($(\".single-image\").index($(this).closest(\".single-image\")));\n    if (e.shiftKey) {\n      let iMin = Math.min(rem[rem.length - 2], rem[rem.length - 1]);\n      let iMax = Math.max(rem[rem.length - 2], rem[rem.length - 1]);\n      for (i = iMin; i <= iMax; i++) {\n        let selectedCount = $(\"#cantoViewBody\").find(\".single-image .icon-s-Ok2_32\").length;\n        if (selectedCount >= 20) {\n          $(\".max-select-tips\").fadeIn(\"normal\").delay(2000).fadeOut(1000);\n          return;\n        }\n        $(\".single-image:eq(\" + i + \") .select-box\").addClass(\"icon-s-Ok2_32\");\n        $(\".single-image:eq(\" + i + \")\").addClass(\"selected\");\n      }\n    } else {\n      let selectedCount = $(\"#cantoViewBody\").find(\".single-image .icon-s-Ok2_32\").length;\n      if (selectedCount >= 20) {\n        if (!$(this).hasClass(\"icon-s-Ok2_32\")) {\n          $(\".max-select-tips\").fadeIn(\"normal\").delay(2000).fadeOut(1000);\n        }\n        $(this).removeClass(\"icon-s-Ok2_32\");\n        $(this).closest(\".single-image\").removeClass(\"selected\");\n        return;\n      } else {\n        $(this).toggleClass(\"icon-s-Ok2_32\");\n        $(this).closest(\".single-image\").toggleClass(\"selected\");\n      }\n\n    }\n    handleSelectedMode();\n  });\n  imageResize();\n  handleSelectedMode();\n\n  let bodyHeight = $(\"#cantoImageBody\").height();\n  let documentHeight = $(\"#imagesContent\").height();\n  if (documentHeight < bodyHeight && !isLoadingComplete) {\n    loadMoreAction();\n  }\n}\n\nlet handleSelectedMode = function () {\n  let selectedCount = $(\"#cantoViewBody\").find(\".single-image .icon-s-Ok2_32\").length;\n  $(\"#cantoViewBody\").find(\"#selected-count\").html(selectedCount);\n  if (selectedCount) {\n    $(\"#cantoViewBody\").find(\"#globalSearch\").addClass(\"hidden\");\n    $(\"#cantoViewBody\").find(\"#filterSection\").addClass(\"hidden\");\n    $(\"#cantoViewBody\").find(\"#selectedCountSection\").removeClass(\"hidden\");\n    $(\"#cantoViewBody\").find(\"#selectedActionSection\").removeClass(\"hidden\");\n    $(\"#insertAlbumWrapper\").addClass(\"hidden\");\n  } else {\n    $(\"#cantoViewBody\").find(\"#globalSearch\").removeClass(\"hidden\");\n    $(\"#cantoViewBody\").find(\"#filterSection\").removeClass(\"hidden\");\n    $(\"#cantoViewBody\").find(\"#selectedCountSection\").addClass(\"hidden\");\n    $(\"#cantoViewBody\").find(\"#selectedActionSection\").addClass(\"hidden\");\n    $(\"#insertAlbumWrapper\").removeClass(\"hidden\");\n  }\n  //toggle isAllSelectedMode\n  $(\"#cantoViewBody\").find(\"#selectAllBtn\").addClass(\"all-selected\");\n  $(\"#cantoViewBody\").find(\"#selectAllBtn\").attr(\"title\", \"Deselect All\");\n};\nlet resetImageURL = function (id, url) {\n  let imgDom = $(\"#cantoViewBody\").find(\"#\" + id);\n  let data = \"data:image\" + url;\n  imgDom.attr(\"src\", data);\n};\n\nfunction displayFullyImage(src) {\n  let $viewImageModal = $(\"#cantoViewBody\").find(\"#viewImageModal\");\n  let $pageMask = $(\"#cantoViewBody\").find(\"#pageMask\");\n  $viewImageModal.find(\"img\").attr(\"src\", src);\n  $(\"#cantoViewBody\").find(\".loading-icon\").addClass(\"hidden\");\n  $viewImageModal.removeClass(\"hidden\");\n  $pageMask.removeClass(\"hidden\");\n  $(\"#cantoViewBody\").find('.view-image-modal .close-btn').off('click').on('click', function () {\n    $viewImageModal.addClass(\"hidden\");\n    $pageMask.addClass(\"hidden\");\n  });\n}\n\n\nfunction imageDetail(detailData) {\n  if (detailData) {\n    $(\"#cantoViewBody\").find(\"#imageDetailModal_name\").html(detailData.name);\n    $(\"#cantoViewBody\").find(\"#imageDetailModal_size\").html(detailData.size + \"KB\");\n    $(\"#cantoViewBody\").find(\"#imageDetailModal_created\").html(dateHandler(detailData.created));\n    $(\"#cantoViewBody\").find(\"#imageDetailModal_uploaded\").html(dateHandler(detailData.lastUploaded));\n    $(\"#cantoViewBody\").find(\"#imageDetailModal_status\").html(detailData.approvalStatus);\n    $(\"#cantoViewBody\").find(\"#insertIntoPostBtn\").data(\"downloadurl\", detailData.url.download);\n\n    let $imageDetailModal = $(\"#cantoViewBody\").find(\"#imageDetailModal\");\n    $(\"#cantoViewBody\").find(\".loading-icon\").addClass(\"hidden\");\n    $imageDetailModal.removeClass(\"hidden\");\n    $(\"#cantoViewBody\").find('#imageDetailModal .close-btn').off('click').on('click', function () {\n      $imageDetailModal.addClass(\"hidden\");\n    });\n  }\n}\n\nfunction imageNewDetail(detailData) {\n  let sliceString = function (string, dom, length) {\n    if (!string) {\n      $(dom).closest(\".detail-item\").addClass(\"hidden\");\n      return \"Null\";\n    } else {\n      $(dom).closest(\".detail-item\").removeClass(\"hidden\");\n    }\n    if (!length) {\n      length = 150;\n    }\n    if (string.length > length) {\n      $(dom).removeClass(\"hidden\");\n      return string.slice(0, length) + \"...\";\n    } else {\n      $(dom).addClass(\"hidden\");\n      return string;\n    }\n  };\n  if (detailData) {\n    $(\"#cantoViewBody\").find(\"#imagebox_name\").html(detailData.name);\n    $(\"#cantoViewBody\").find(\"#imagebox_size\").html(Math.round(detailData.size / 1024) + \"KB\");\n    $(\"#cantoViewBody\").find(\"#imagebox_created\").html(detailData.metadata ? (detailData.metadata[\"Create Date\"] ? detailData.metadata[\"Create Date\"] : \" \") : \" \");\n    $(\"#cantoViewBody\").find(\"#imagebox_uploaded\").html(dateHandler(detailData.lastUploaded));\n    $(\"#cantoViewBody\").find(\"#imagebox_status\").html(detailData.approvalStatus);\n    let copyrightMoreDom = $(\"#imagebox_copyright\").closest(\".detail-item\").find(\".more\");\n    $(\"#cantoViewBody\").find(\"#imagebox_copyright\").html(sliceString(detailData.copyright, copyrightMoreDom, 177));\n    $(\"#cantoViewBody\").find(\"#imagebox_copyright\").data(\"field\", detailData.copyright);\n    let tactMoreDom = $(\"#imagebox_tac\").closest(\".detail-item\").find(\".more\");\n    $(\"#cantoViewBody\").find(\"#imagebox_tac\").html(sliceString(detailData.termsAndConditions, tactMoreDom, 160));\n    $(\"#cantoViewBody\").find(\"#imagebox_tac\").data(\"field\", detailData.termsAndConditions);\n    $(\"#cantoViewBody\").find(\"#insertBtn\").data(\"id\", detailData.id);\n    $(\"#cantoViewBody\").find(\"#insertBtn\").data(\"scheme\", detailData.scheme);\n  }\n\n  let $imageDetailModal = $(\"#cantoViewBody\").find(\"#imagePreviewModal\");\n  $(\"#cantoViewBody\").find(\".loading-icon\").addClass(\"hidden\");\n  $imageDetailModal.removeClass(\"hidden\");\n  $(\"#cantoViewBody\").find('#imagePreviewModal .close-btn').off('click').on('click', function () {\n    $imageDetailModal.addClass(\"hidden\");\n  });\n  $(\"#cantoViewBody\").find('#imagePreviewModal #cancelBtn').off('click').on('click', function () {\n    $imageDetailModal.addClass(\"hidden\");\n  });\n  $(\"#cantoViewBody\").find('#imagePreviewModal .detail-item .more').off('click').on('click', function () {\n    let text = $(this).closest(\".detail-item\").find(\".content\").data(\"field\");\n    $(this).closest(\".detail-item\").find(\".content\").html(text);\n    $(this).addClass(\"hidden\");\n  });\n  $(\"#cantoViewBody\").find('#imagePreviewModal #insertBtn').off('click').on('click', function () {\n    $(\"#cantoViewBody\").find(\".loading-icon\").removeClass(\"hidden\");\n    let assetArray = [\n      {\n        id: detailData.id,\n        scheme: detailData.scheme,\n        size: detailData.size,\n        name: detailData.name,\n      }\n    ];\n    cantoAPI.insertImage(assetArray);\n  });\n}\n\nfunction dateHandler(str) {\n  return str.substr(0, 4) + '-' + str.substr(4, 2) + '-'\n    + str.substr(6, 2) + ' ' + str.substr(8, 2) + ':' + str.substr(10, 2);\n}\n\nfunction treeviewDataHandler() {\n  cantoAPI.loadTree(treeviewController);\n}\n\nlet treeviewController = function (dummyData) {\n  let html = \"\";\n  html = treeviewFirstRender(dummyData);\n  $(\"#cantoViewBody\").find(\"#treeviewContent\").append(html);\n  $(\"#cantoViewBody\").find(\"#treeviewContent > ul\").animate({\n    height: 'toggle'\n  });\n\n};\nlet treeviewFirstRender = function (data) {\n  let html = \"<ul style='display: none;'>\";\n  $.each(data, function (i, d) {\n    let listclass = \" \";\n    if (d.size == 0) {\n      listclass = \"no-child\";\n    } else if (d.scheme == \"folder\") {\n      listclass = \"has-sub-folder\";\n    }\n    html += `<li data-id=\"${d.id}\"  class=\"${listclass}\">`;\n    let iconStyle = \"icon-s-Folder_open-20px\";\n    if (d.scheme == \"album\") {\n      iconStyle = \"icon-s-Album-20px\";\n    }\n    html += `<i class=\"${iconStyle}\"></i>\n                    <img src=\"https://s3-us-west-2.amazonaws.com/static.dmc/universal/icon/cantoloading.gif\" class=\"folder-loading hidden\" alt=\"Loading\">\n                    <span>${d.name}</span>\n                </li>`;\n  });\n  html += \"</ul>\";\n  return html;\n};\nlet subTreeRender = function (data) {\n  let html = treeviewRender(data);\n  $(\"#cantoViewBody\").find(\".current-tree-node\").append(html);\n  $(\"#cantoViewBody\").find(\".current-tree-node > ul\").animate({\n    height: 'toggle'\n  });\n  $(\"#cantoViewBody\").find(\".current-tree-node\").find(\".folder-loading\").addClass(\"hidden\");\n  $(\"#cantoViewBody\").find(\".current-tree-node\").find(\".icon-s-Folder_open-20px\").removeClass(\"hidden\");\n  $(\"#cantoViewBody\").find(\".current-tree-node\").removeClass(\"current-tree-node\");\n};\nlet treeviewRender = function (data) {\n  let html = \"<ul style='display: none;'>\";\n  $.each(data, function (i, d) {\n    let listclass = \" \";\n    if (d.size == 0) {\n      listclass = \"no-child\";\n    }\n    html += `<li data-id=\"${d.id}\"  class=\"${listclass}\">`;\n    let iconStyle = \"icon-s-Folder_open-20px\";\n    if (d.scheme == \"album\") {\n      iconStyle = \"icon-s-Album-20px\";\n    }\n    html += `<i class=\"${iconStyle}\"></i>\n                    <span>${d.name}</span>`;\n    if (d.children && d.children.length) {\n      html += treeviewRender(d.children);\n    }\n    html += '</li>';\n  });\n  html += \"</ul>\";\n  return html;\n};\n\nfunction imageResize() {\n  let initCount = 8;\n  // let totalWidth = totalWidth = Number($(\"#cantoViewBody\").find(\"#imagesContent\")[0].offsetWidth);\n  let totalWidth = Number($(\"#cantoViewBody\").find(\"#imagesContent\")[0].offsetWidth);\n  let singleImageWidth = 0;\n  let getCountInALine = function (n) {\n    singleImageWidth = Number((totalWidth - 8) / n - 2);\n    if ((singleImageWidth >= 160) && (singleImageWidth <= 210)) {\n      return singleImageWidth;\n    } else if (singleImageWidth < 160) {\n      n--;\n      getCountInALine(n);\n    } else if (singleImageWidth > 210) {\n      n++;\n      getCountInALine(n);\n    }\n  };\n  let singleWidth = getCountInALine(initCount);\n  $(\"#cantoViewBody\").find('.single-image').css(\"width\", singleWidth);\n}\n\n//scroll to load more\n\nfunction isScrollToPageBottom() {\n  let bodyHeight = $(\"#cantoImageBody\").height();\n  let documentHeight = $(\"#imagesContent\").height();\n  let scrollHeight = $(\"#cantoImageBody\").scrollTop();\n  let isToBottom = documentHeight - bodyHeight - scrollHeight < 0;\n  let nowCount = $(\".single-image\").length == 0;\n  return isToBottom && !nowCount;\n}\n\nfunction loadMoreHandler() {\n  let start = currentImageList.length == 0 ? 0 : apiNextStart;\n  let filterString = \"sortBy=time&sortDirection=descending&limit=\" + singleCountLoad + \"&start=\" + start;\n  let imageCount = $(\".single-image\").length;\n  if (imageCount !== 0) {\n    $(\"#loadingMore\").fadeIn(\"slow\");\n  } else {\n    $(\"#cantoViewBody\").find(\"#imagesContent\").html(\"\");\n  }\n  return filterString;\n}\n\nfunction loadMoreAction() {\n  if (searchedBy == \"bySearch\") {\n    let value = $(\"#cantoViewBody\").find(\"#globalSearch input\").val();\n    if (!value) {\n      return;\n    }\n    let initSchme = $(\"#cantoViewBody\").find(\".type-font.current\").data(\"type\");\n    let data = {};\n    data.scheme = initSchme;\n    data.keywords = value;\n    cantoAPI.getFilterList(data, imageListDisplay);\n  } else if (searchedBy == \"bytree\") {\n    let albumId = $(\"#cantoViewBody\").find(\"#treeviewSection ul li\").find(\".selected\").data(\"id\");\n    cantoAPI.getListByAlbum(albumId, imageListDisplay);\n  } else {\n    let initSchme = $(\"#cantoViewBody\").find(\".type-font.current\").data(\"type\");\n    getImageInit(initSchme);\n  }\n}\n\nfunction uploadClick(e) {\n  document.querySelector(\"#uploadBtnInvisible\").click();\n}\n\nfunction uploadFileToCanto(e) {\n  let url = `https://${_tenants}/api/v1/upload/setting`;\n  fetch(url, {\n    method: \"GET\",\n    headers: {\n      \"Authorization\": `${_tokenType} ${_accessToken}`,\n      \"Content-Type\": \"application/json; charset=utf-8\"\n    },\n  }).then(response => {\n    return response.json();\n  }).then(data => {\n    const formData = new FormData();\n    formData.append(\"key\", data.key);\n    formData.append(\"acl\", data.acl);\n    formData.append(\"AWSAccessKeyId\", data.AWSAccessKeyId);\n    formData.append(\"Policy\", data.Policy);\n    formData.append(\"Signature\", data.Signature);\n    formData.append(\"x-amz-meta-file_name\", e.files[0].name);\n    formData.append(\"x-amz-meta-tag\", \"\");\n    formData.append(\"x-amz-meta-scheme\", \"\");\n    formData.append(\"x-amz-meta-id\", \"\");\n    formData.append(\"x-amz-meta-album_id\", \"\");\n    formData.append(\"file\", e.files[0]);\n    let statusBar = parent.document.querySelector(\".modal-status-bar\");\n\n    fetch(data.url, {\n      method: \"post\",\n      body: formData,\n      mode: \"no-cors\",\n      redirect: 'follow'\n    }).then(response => {\n      statusBar.style.display = \"block\";\n      statusBar.innerHTML = \"Uploading image...\";\n\n    }).catch(error => {\n      console.log(error);\n    }).finally(() => {\n      statusBar.innerHTML = \"Uploading - This can take several minutes...\";\n      checkStatusInterval(e.files[0].name);\n    });\n  }).catch(error => {\n    console.log(\"An error occurred while attempting to grab upload settings!\");\n    console.log(error);\n  });\n\n  function checkStatusInterval(filename) {\n    let url = `https://${_tenants}/api/v1/upload/status?hours=1`;\n    let statusBar = parent.document.querySelector(\".modal-status-bar\");\n    statusChecker = setInterval(() => {\n\n      fetch(url, {\n        method: \"get\",\n        headers: {\"Authorization\": _tokenType + \" \" + _accessToken},\n      }).then(response => {\n        return response.json();\n      }).then(body => {\n        if (body.results && body.results.length > 0) {\n          let results = body.results.filter(e => {\n            console.log(\"evaluating: \", e);\n            if (e.name == filename && e.status != \"Done\") {\n              console.log(\"match!!!\");\n              return e;\n            }\n          });\n          if (results.filter(e => e != undefined).length == 0) {\n            statusBar.innerHTML = \"Canto processing complete! Reloading\"\n            window.location.reload();\n          }\n        }\n      }).catch(error => {\n        console.log(\"an error occurred!\");\n        console.log(error)\n      });\n    }, 5000);\n  }\n\n}\n\nparent.document.querySelector(\".modal-status-bar\").style.display = \"none\";\n\n// Accept HMR as per: https://vitejs.dev/guide/api-hmr.html\nif (import.meta.hot) {\n  import.meta.hot.accept(() => {\n    console.log(\"HMR\")\n  });\n}\n"],"names":["_accessToken","_tokenType","_tenants","cantoAPI","_APIHeaders","searchedBy","currentImageList","singleCountLoad","apiNextStart","isLoadingComplete","_formatDistrict","setToken","tokenInfo","callback","url","request","data","treeID","albumID","filterString","loadMoreHandler","previewURL","ID","scheme","contentID","targetWindow","imageArray","response","contentResponse","id","mergedAssetData","album","albumId","albumName","getFrameDom","addEventListener","getTokenInfo","event","treeviewDataHandler","initSchme","getImageInit","contentIframe","e","imageResize","imageListDisplay","handleSelectedMode","assetArray","selectedArray","i","obj","displayFullyImage","targetURL","targetID","imageNewDetail","childList","subTreeId","subTreeRender","value","isScrollToPageBottom","loadMoreAction","inputObj","imageListSection","imageList","formatArr","d","extension","html","disname","rem","nameTop","iMin","iMax","bodyHeight","selectedCount","src","$viewImageModal","$pageMask","detailData","sliceString","string","dom","length","dateHandler","copyrightMoreDom","tactMoreDom","$imageDetailModal","text","str","treeviewController","dummyData","treeviewFirstRender","listclass","iconStyle","treeviewRender","initCount","totalWidth","singleImageWidth","getCountInALine","n","singleWidth","documentHeight","scrollHeight","isToBottom","nowCount","start"],"mappings":"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"}